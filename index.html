<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/threejs-icon.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Three.js + TypeScript + Vite</title>
</head>
<body>
  <canvas id="scene"></canvas>
  <p> iteration49 </p>
  <p id="testString"> Test page </p>
  <ul id="placesList"></ul>
  
</body>
</html>

<script src="/scripts/DataLoader.js"></script>
<script src="/scripts/DataUpdater.js"></script>
  <script>
    var dataLoader;
    var dataUpdater;
    var use_testdata_insteadDB = false;
    
    var tast_upload_savedata = {"name":"Test Place 86",
                                "xr_objects":[
                                  {"id":399198613290352830,
                                  "name":"Gear01",
                                  "pos":[0.33,-0.3,0.42],
                                  "rot":[0.42,0.42,0,1],"scale":[1,1,1]}
                                ]}

    document.addEventListener('DOMContentLoaded', async () => {
      var dataLoader = new DataLoader(use_testdata_insteadDB);
      var dataUpdater = new DataUpdater(use_testdata_insteadDB, '/.netlify/functions/updatePlace');

      console.log("_________test load file_________");
      dataUpdater.updatePlace('399239316304298187', tast_upload_savedata);
      console.log("________/test load file_________");

      console.log("_________test read file_________");      
      let res = await dataLoader.loadSaveData();
      let exactPlace = pickExactPlace('399239316304298187');
      dataLoader.displayPlaces([exactPlace]);
      //var places = await dataLoader.loadSaveData();
      //dataLoader.displayPlaces(places);
      console.log("________/test read file_________");
    });

  </script>
