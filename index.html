<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/threejs-icon.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Three.js + TypeScript + Vite</title>
</head>
<body>
  <canvas id="scene"></canvas>
  <p> iteration48 </p>
  <p id="testString"> Test page </p>
  <ul id="placesList"></ul>
  
</body>
</html>

<script src="/scripts/DataLoader.js"></script>
<script src="/scripts/DataUpdater.js"></script>
  <script>
    var dataLoader;
    var dataUpdater;
    var use_testdata_insteadDB = false;

    var test_save_place = {"name":"Initial test place",
      "xr_objects":[
        {"id":399198485711159500,"name":"Polyhedronis","pos":[0,0.8,0],"rot":[0,0,0,1],"scale":[1,1,1]},
        {"id":399198613290352830,"name":"Gearis42","pos":[0,-0.8,0],"rot":[0,0,0,1],"scale":[1,1,1]}]
      }

    document.addEventListener('DOMContentLoaded', async () => {
      var dataLoader = new DataLoader(use_testdata_insteadDB);
      var dataUpdater = new DataUpdater(use_testdata_insteadDB, '/.netlify/functions/updatePlace');
      
      dataUpdater.updatePlace('399239316304298187', test_save_place);
      
      /*
      console.log('DOM loaded');
      var places = await dataLoader.loadSaveData();
      dataLoader.displayPlaces(places);*/
    });

  </script>
